# Booking System API

Ένα RESTful backend σύστημα κρατήσεων, υλοποιημένο με Django REST Framework, που περιλαμβάνει JWT authentication, έλεγχο ρόλων (user / admin) και προηγμένους επιχειρησιακούς κανόνες όπως δυναμική δημιουργία διαθεσιμότητας, αποτροπή διπλών και επικαλυπτόμενων κρατήσεων και πλήρη κύκλο ζωής booking.

Το project αναπτύχθηκε ως τελική εργασία και προσομοιώνει ένα πραγματικό σύστημα κρατήσεων με δυνατότητες τόσο για απλούς χρήστες όσο και για διαχειριστές.
---

## 🚀 Λειτουργίες

### Χρήστες & Αυθεντικοποίηση
- Εγγραφή χρήστη με username, email, όνομα και επώνυμο
- Σύνδεση με JWT (access & refresh tokens)
- Ασφαλής διαχείριση κωδικών πρόσβασης
- Έλεγχος πρόσβασης βάσει ρόλου (User / Admin)

### Υπηρεσίες & Διαθεσιμότητα
- Διαχείριση υπηρεσιών
- Δυναμική δημιουργία time slots κατ’ απαίτηση
- Παραγωγή slots ανά υπηρεσία και ημέρα (π.χ. 09:00–17:00 ανά 30’)
- Αυτόματη επανεμφάνιση slots μετά από ακύρωση

### Κρατήσεις (Bookings)
- Δημιουργία κράτησης συνδεδεμένη με:
  - Χρήστη
  - Υπηρεσία
  - Time slot διαθεσιμότητας
- **Καθολικός έλεγχος σύγκρουσης**
  - Δεν επιτρέπονται επικαλυπτόμενες κρατήσεις, ακόμα και σε διαφορετικές υπηρεσίες
- **Αποτροπή διπλής κράτησης**
  - Εφαρμόζεται σε επίπεδο serializer και βάσης δεδομένων

### Κύκλος Ζωής Κράτησης
- `PENDING` → `CONFIRMED` (ενέργεια admin)
- `CANCELLED` → το slot γίνεται ξανά διαθέσιμο
- Δεν επιτρέπεται ακύρωση παρελθοντικών κρατήσεων

### Λειτουργίες Admin
- Προβολή **όλων** των κρατήσεων
- Επιβεβαίωση ή ακύρωση κρατήσεων
- Φιλτράρισμα κρατήσεων με βάση:
  - Υπηρεσία
  - Ημερομηνία
  - Κατάσταση
  - Username χρήστη

### Τεκμηρίωση
- Πλήρης τεκμηρίωση API με **Swagger (OpenAPI)**

---

## 🛠 Τεχνολογίες

- Python 3
- Django
- Django REST Framework
- Simple JWT
- MySQL (έτοιμο για production)
- drf-yasg (Swagger)

---

## 📂 Δομή Project

1. [] booking_system/
2. [] ├── bookings/
3. [] │ ├── models.py
4. [] │ ├── serializers.py
5. [] │ ├── views.py
6. [] │ └── urls.py
7. [] ├── booking_system/
8. [] │ ├── settings.py
9. [] │ ├── urls.py
10. [] │ └── ...
11. [] └── manage.py

---

## 🔐 Αυθεντικοποίηση

Η αυθεντικοποίηση γίνεται μέσω JWT.

### Εγγραφή

POST /api/auth/register/

### Σύνδεση

POST /api/auth/login/

Χρήση access token στα requests:
Authorization: Bearer <token>

---

## 📌 Βασικά API Endpoints

### Υπηρεσίες

GET /api/services/
POST /api/services/ (admin)

### Διαθεσιμότητα (δυναμικά slots)

GET /api/services/{id}/available-slots/?date=YYYY-MM-DD

### Κρατήσεις

POST /api/bookings/
GET /api/bookings/
PATCH  /api/bookings/{id}/cancel/
POST   /api/bookings/{id}/confirm/   (admin)

### Οι κρατήσεις μου

GET /api/my-bookings/

---

## ❌ Επιχειρησιακοί Κανόνες

- Ένα time slot δεν μπορεί να κρατηθεί πάνω από μία φορά
- Δεν επιτρέπονται επικαλυπτόμενες κρατήσεις (καθολικός κανόνας)
- Οι χρήστες βλέπουν μόνο τις δικές τους κρατήσεις
- Οι χρήστες ακυρώνουν μόνο δικές τους και μελλοντικές κρατήσεις
- Οι παρελθοντικές κρατήσεις δεν ακυρώνονται
- Οι ακυρωμένες κρατήσεις ελευθερώνουν αυτόματα το slot

---

## 📄 Τεκμηρίωση API

Το Swagger UI είναι διαθέσιμο στη διεύθυνση:

http://127.0.0.1:8000/swagger/

---

## ⚙️ Οδηγίες Εγκατάστασης

1. Κλωνοποιήστε το repository
2. Δημιουργήστε και ενεργοποιήστε virtual environment
3. Εγκαταστήστε τα dependencies:

pip install -r requirements.txt

4. Ρυθμίστε τη βάση δεδομένων MySQL στο `settings.py`
5. Εκτελέστε migrations:

python manage.py migrate

6. Δημιουργήστε admin χρήστη:

python manage.py createsuperuser

7. Εκκινήστε τον server:

python manage.py runserver

---

## 🎓 Δημιουργός

Το project αναπτύχθηκε ως τελική εργασία με στόχο την επίδειξη:
- Backend αρχιτεκτονικής & σχεδίασης API
- Authentication & Authorization
- Σύνθετων επιχειρησιακών κανόνων
- Ρεαλιστικής λειτουργίας συστήματος κρατήσεων
